# (PART\*) Accompanying Work {-}


# Homework Assignment {-}

```{r, echo=FALSE, fig.cap=NULL, out.width="100%"}
knitr::include_graphics("gfx/CH00-Assignment1.png")
```

```{block2, type='rmdexercise'}
Please hand in the answers to the following exercises by uploading a PDF in Ilias before the deadline expires. The PDF should contain solutions, explanations and the code itself and needs to be produced using RMarkdown. This Homework Assignment is an **individual** task and passing is required to complete the course. The deadline for submitting your solutions over Ilias is 24. April 2020 - 9:00 am.
  
```

**1. Simple Calculations (10%)**

\[ 2^{15} ,\quad
\frac{20}{\sqrt{\pi}} ,\quad
{10 \choose 5} ,\quad
\ln{\frac{2+4}{4+3}} ,\quad
\sqrt[3]{-27},\quad
\sin(270^\circ)
\]

\[ \log_5(6) ,\quad
\sum_{i=0}^{5}{5} ,\quad
\sum_{i=3}^{5}{i \; !} ,\quad
\prod_{i=1}^{107}{i},\quad
1-0.000000000000000001
\]

- How many digits does the result (overall number, not only after decimal point) from the second last calculation (Product) have?
- Is the result from the last calculation identical to $1-0.000000000000000001$ ? Why or why not and what are the implications? 

***

**2. Poker Game (40%)**

You have a regular set of poker cards. The order of the face cards is as follows (numeric value of card in parantheses): 

\[ 2 < 3 < \ldots < 9 < 10 < \text{Jack}\,(11) < \text{Queen}\,(12) < \text{King}\,(13) < \text{Ace}\,(14)\]

The order of the colors is: 
\[ \text{Diamonds}\,\diamondsuit < \text{Clubs}\,\clubsuit < \text{Hearts}\,\heartsuit < \text{Spades} \,\spadesuit\]

1. Write a function `poker()`, where each of the two players receives five cards of the described deck. The player with the highest card wins the game. Your function should return the winner of the game only. *Hint:* It may be easier to use the values instead of the names of the face cards.

2. Manipulate your function from 1. and create the function `poker_p1()` so that Player 1 has a 60% chance of getting a King and therefore wins more often. 

3. Make yourself familiar with the function `replicate()`. Apply your knowledge to the original and manipulated function and play the implemented games one million times. Visually prove that Player 1 has a higher chance of winning when using function `poker_p1()` using a suitable visualization. Include the function name and your matriculation number in the main title of your plots.

***

**3. OLS Regression (45%)**

Within R we can easily fit regression models using the `lm()` function, which not only gives us the plain coefficients but a lot of additional output. Please write a function `my.lm()` that performs a linear regression and returns results in the form of `summary(lm(y~1+x1+x2+...))`. 

When writing functions, please document all steps in detail to show your procedure and make your programming comprehensible. Before you start, make sure that you are familiar with the associated concepts and provide correct interpretations of your results.

Implement your function `my.lm()`. The following steps are the cornerstones of the implementation and may be your guideline while developing the function.

1. Estimate the regression coefficients.
2. Calculate the variance of the estimated coefficients.
3. Perform hypothesis tests to check whether the calculated coefficients are significant, outputting $t$-value as well as $p$-value.
4. Calculate additional metrics that are included in the output like $R^2$, $R_{adj}^2$ and the summary statistics of the residuals.
5. Perform the F-Test and calculate the necessary elements to interpret the results.
6. Wrap everything in a function that uses a vector $y$ and a matrix or vector $x$ as input. Make the necessary parameters adjustable for the user and format the output so that it looks like the one from `summary(lm())`. 

**Hint 1:** You do not need to support the formula notation (~) in your function.

**Hint 2:** If you are not totally sure about your interpretation have a look at the recommended books in the Ilias forum. You can find at least one book as PDF via the OPAC System.

To prove that your regression function works corretcly, compare it to an output generated by `lm()` with at least 3 regressors (e.g. using the data from the `wooldridge::wage1` dataset) and interpret the resulting coefficients

***

**4. Bug Bounty (5%)**

Participate in the bug bounty program, either by submitting an error found in the available course notes or by suggesting a substantial improvement to the course notes. 
<!--

```{block2, type='rmdexercise'}
Please hand in the answers to the following exercises by uploading a PDF in Ilias before the deadline expires. The PDF should contain solutions, explanations and the code itself and needs to be produced using RMarkdown. This Assignment is an **individual** task, will be graded and counts towards your final grade. The deadline for submitting your solutions is 6. June 2019 - 14:15.
  
```

**1. Documentation (10%)**

High-quality documentation is extremely important for programming projects. 10% of the marks for this assignment are awarded for high-quality documentation of your produced solution. Criteria for the evaluation are:

- Completeness and integrity of the code and user documentation
- Consistency and clarity of your program documentation
- Sharpness of additional explanations and descriptions
- Clarity of the code itself

***

**2. Poker Game (40%)**

You have a regular set of poker cards. The order of the face cards is as follows (numeric value of card in parantheses): 

\[ 2 < 3 < \ldots < 9 < 10 < \text{Jack}\,(11) < \text{Queen}\,(12) < \text{King}\,(13) < \text{Ace}\,(14)\]

The order of the colors is: 
\[ \text{Diamonds}\,\diamondsuit < \text{Clubs}\,\clubsuit < \text{Hearts}\,\heartsuit < \text{Spades} \,\spadesuit\]

1. Write a function `poker()`, where each of the two players receives five cards of the described deck. The player with the highest card wins the game. Your function should return the winner of the game only. *Hint:* It may be easier to use the values instead of the names of the face cards.

2. Manipulate your function from 1. and create the function `poker_p1()` so that Player 1 has a 60% chance of getting a King and therefore wins more often. 

3. Make yourself familiar with the function `replicate()`. Apply your knowledge to the original and manipulated function and play the implemented games one million times. Visually prove that Player 1 has a higher chance of winning when using function `poker_p1()` using a suitable visualization. Include the function name and your matriculation number in the main title of your plots.

***

**3. Big Data (45%)**

Handling huge datasets gets more and more important as the produced amount of data grows steadily. The zip-Archive `BigDataFiles` uploaded in Ilias contains data for multiple variables segmented into many files storing comma-separated values. Download the provided data, extract the files into a separate folder to your hard drive and write R-Code to solve the following tasks:

1. Load all files into R and combine all observations of the 25 Variables in an appropriate data structure.
2. Calculate the arithmetic mean, standard deviation, maximum and minimum for the 25 variables and combine the results including the name of the variable in a dataframe. Round mean and standard deviation to a single digit when listing them in the dataframe.
3. Which variable has the highest mean and which the highest standard deviation?
4. How many missing values (`NA`) are in the data? What percentage of the observations is missing?
5. What is the smallest absolute value in the dataset? To which variable does it belong and where is it located (index values)?
6. Assuming all 25 variables are drawn from normal distributions: Normalize the variables so that they are standard normally distributed.
7. What is the absolute maximum value in the dataset after normalization?
8. Perform a  Correlation-Test for every variable against every other and report the p-value of each test you performed in a table (rounded to 2 digits). Include this table in your document. How many tests have to be performed if simply following the directions in this question and how many are really necessary?
9. Interpret the two tests with smallest and highest p-value as learned in your undergraduate statistics course.

**Tip:** Depending on your computers' performance the requested computations may take some time. When developing your solution it is good advice not to perform all actions on the whole dataset every time you try your code. Select a few files (e.g. 10) and test your code with them first to get a working routine before computing the final results using the entire dataset.

**Bonus:** This exercise can be solved using many different ways. Generally, it is possible to do everything with completely vectorized functions instead of `for`, `while` or `repeat`-loops. You can earn a bonus on this exercise of *up to 20%* if you solve this exercise with vectorized code (`apply`, `lapply`, `mapply`, etc.). Decide before you start, rather use classical loops instead of 'failing' by trying to earn the bonus.

***

**4. Bug Bounty (5%)**

Participate in the bug bounty program, either by submitting an error found in the available course notes or by suggesting a substantial improvement to the course notes. 



# Assignment II {-}

```{r, echo=FALSE, fig.cap=NULL, out.width="100%"}
knitr::include_graphics("gfx/CH00-Assignment2.png")
```

```{block2, type='rmdexercise'}
This assignment consists of different exercises for Bachelor and Master Students - choose the correct set of tasks accordingly. Please hand in the answers to the following exercises as RMarkdown file (*.Rmd) via Email (benjamin.buchwitz@ku.de) and as paper copy before the deadline expires. This Assignment will be graded and counts towards your final grade. 
  
```

### Bachelor {-}

**1. OLS Regression**

Within R we can easily fit regression models using the `lm()` function, which not only gives us the plain coefficients but a lot of additional output. Please write a function `my.lm()` that performs a linear regression and returns results in the form of `summary(lm(y~1+x1+x2+...))`. 

When writing functions, please document all steps in detail to show your procedure and make your programming comprehensible.Before you start, make sure that you are familiar with the associated concepts. 

First, explain the theoretical concept of a $p$-value and how it relates to the different tests in the output of `summary(lm())`.

Second, implement your function `my.lm()`. The following steps are the cornerstones of the implementation and may be your guideline while developing the function.

1. Estimate the regression coefficients.
2. Calculate the variance of the estimated coefficients.
3. Perform hypothesis tests to check whether the calculated coefficients are significant, outputting $t$-value as well as $p$-value.
4. Calculate additional metrics that are included in the output like $R^2$, $R_{adj}^2$ and the summary statistics of the residuals.
5. Perform the F-Test and calculate the necessary elements to interpret the results.
6. Wrap everything in a function that uses a vector $y$ and a matrix or vector $x$ as input. Make the necessary parameters adjustable for the user and format the output so that it looks like the one from `summary(lm())`. Hint: You do not need to support the formula notation (~) in your function.

***

**2. Using OLS Regression**

Simulate a data set with one dependent and 20 independent variables that are normally i.i.d.. Each variable should have 100 observations. Use `set.seed()` to make your calculation reproducible. 

**Are there any significant ($\alpha$ = 5%) correlations between your regressors and the dependent variable?**

Conduct automated regressions using your own regression function `my.lm()` for all possible combinations of up to 5 regressors. Save your regression results in a suitable data structure and use this data structure to answer the following questions:

1. How many regressions did you conduct?
2. How many significant (1% and 5% significance level) regression coefficients did you receive?
3. How many significant regression coefficients you expect?
4. How can you explain the results from question 2 and possible deviations from your expectations (question 3)?
5. Plot the distribution of $p$-values individually for each regressor.
6. Which regression has the highest explanatory power? Show the respective regression and discuss your results. Use the regression shown to explain how to interpret the coefficients.

***


**3. Reflection**

Write a short paragraph on what you have learnt in this exercise about programming with R and about regression analysis and testing. Establish a relationship to your theoretical explanations about the $p$-value from task 1.

***


### Master {-}

**1. Logit/Probit Regression**

Within R we can fit a probit or logit regression model using the `glm()` function, which not only gives us the plain coefficients but a lot of additional output. Please write a function `my.probit()` or `my.logit()` that performs a probit or logit regression and returns results similar to `summary(glm(y~1+x1+x2+... , family = binomial(link = "probit" / "logit")))`. Hint: To produce the maximum-likelihood estimator you can use the `optim()`function.
When writing functions, please document all steps in detail to show your procedure and make your programming comprehensible.
Before you start, make sure that you are familiar with the associated concepts. First, explain the theoretical concept of a probit or logit regression as well as a $p$-value. Elaborate on how $p$-values relate to the different tests in the output of `summary(glm())`.

Second, implement your function `my.probit()` or `my.logit()`. The following steps are the cornerstones of the implementation and may be your guideline while developing the function.

1. Estimate the regression coefficients.
2. Calculate the variance of the estimated coefficients.
3. Perform hypothesis tests to check whether the calculated coefficients are significant, outputting $z$-value as well as $p$-value.
4. Calculate additional metrics that are included in the output like $AIC$, Deviances and the summary statistics of the residuals.
5. Wrap everything in a function that uses a vector $y$ and a matrix or vector $x$ as input. Make the necessary parameters adjustable for the user and format the output so that it looks similar to the one from `summary(glm())`. Hint: You do not need to support the formula notation (~) in your function.

***


**2. Using Probit / Logit Regression**

Simulate a data set with one dependent and 20 independent variables that are normally i.i.d.. Each variable should have 100 observations. Use `set.seed()` to make your calculation reproducible. 

**Are there any significant ($\alpha$ = 5%) correlations between your regressors and the dependent variable?**

Conduct automated regressions using your own regression function `my.probit()` or `my.logit()` for all possible combinations of up to 5 regressors. Save your regression results in a suitable data structure and use this data structure to answer the following questions:

1. How many regressions did you conduct?
2. How many significant (1% and 5% significance level) regression coefficients did you receive?
3. How many significant regression coefficients you expect?
4. How can you explain the results from question 2 and possible deviations from your expectations (question 3)?
5. Plot the distribution of $p$-values individually for each regressor.
6. Which regression has the highest explanatory power? Show the respective regression.
7. Use the regression shown in question 6 to explain how to interpret the coefficients. What information provide $AIC$, Null and Residual deviance?

***

**3. Reflection**

Write a short paragraph on what you have learnt in this exercise about programming with R and about regression analysis and testing. Establish a relationship to your theoretical explanations from task 1.




-->

<!--

**2. Simple Calculations (10%)**

\[ 2^{15} ,\quad
\frac{20}{\sqrt{\pi}} ,\quad
{10 \choose 5} ,\quad
\ln{\frac{2+4}{4+3}} ,\quad
\sqrt[3]{-27},\quad
\sin(270^\circ)
\]

\[ \log_5(6) ,\quad
\sum_{i=0}^{5}{5} ,\quad
\sum_{i=3}^{5}{i \; !} ,\quad
\prod_{i=1}^{107}{i},\quad
1-0.000000000000000001
\]

- How many digits does the result (overall number, not only after decimal point) from the second last calculation (Product) have?
- Is the result from the last calculation identical to $1-0.000000000000000001$ ? Why or why not and what are the implications? 

***

**3. Handling Data (15%)**

Define the following matrices in a way that you do not have to type in every number manually:
  
\[ A =
       \begin{pmatrix}
     5 & 6 & 7 \\
     8 & 9 & 12 \\
     \end{pmatrix}
     ,\quad 
     B =
       \begin{pmatrix}
     2 & 2 & 2 \\
     2 & 2 & 2 \\
     \end{pmatrix}
     ,\quad 
     C =
       \begin{pmatrix}
     1 & 0 \\
     0 & 1 \\
     \end{pmatrix}
     ,\quad 
     D =
       \begin{pmatrix}
     0 & 0 & 3 & 0 & 0\\
     0 & 0 & 5 & 0 & 0 \\
     \end{pmatrix}
\]
     
 
\[ E_{(57,57)} =
     \begin{pmatrix}
   89_{(1,1)} & 146_{(1,2)} & \cdots & 3281_{(1,57)} \\
   90_{(2,1)} & 147_{(2,2)} & \cdots & 3282_{(2,57)} \\
   \vdots  & \vdots  & \ddots & \vdots  \\
   145_{(57,1)} & 202_{(57,2)} & \cdots & 3337_{(57,57)}
   \end{pmatrix}
\]

- What is the element in the direct center of Matrix $E$?
- Are rows and columns of Matrix $E$ linear independent? Does this change for $E^T$?
- Briefly describe what the following code referring to Matrix $E$ does and returns:

```{r, eval=FALSE}
E[37:40 , 6:9] * matrix(seq(1 , 2.5 , by = .1 ), nrow = 4)
```

***

-->